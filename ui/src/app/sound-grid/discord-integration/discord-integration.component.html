<mat-card>
    <mat-card-title>Discord Bot</mat-card-title>
    <mat-card-content>
        <mat-form-field>
            <mat-label>Guilds</mat-label>
            <mat-select (ngModelChange)="selectGuild($event)" [ngModel]="selectedGuild">
                <mat-option *ngFor="let g of guilds | async" [value]="g">
                    {{g.name}} ({{g.id}})
                </mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field *ngIf="selectedGuild">
            <mat-label>Channels</mat-label>
            <mat-select [(ngModel)]="selectedChannel">
                <mat-option *ngFor="let c of channels | async" [value]="c">
                    {{c.name}} ({{c.id}})
                </mat-option>
            </mat-select>
        </mat-form-field>
        <button
                (click)="joinChannel(selectedGuild, selectedChannel)"
                *ngIf="selectedGuild && selectedChannel && ((joinedChannel | async)?.id != selectedChannel.id)"
                color="primary"
                mat-raised-button>
            Join {{selectedChannel.name}}
        </button>
        <button (click)="leaveChannel(selectedGuild)"
                *ngIf="selectedGuild && (joinedChannel | async) as chan"
                color="warn"
                mat-button>
            Leave {{chan?.name}} ({{selectedGuild.name}})
        </button>
        <!-- FIXME move it to another component? -->
        <mat-label *ngIf="playingTrack | async as track">Now playing: {{track.title}}</mat-label>
    </mat-card-content>
</mat-card>
